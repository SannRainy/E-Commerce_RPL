{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport const setAuthToken = (token: string | null) => {\r\n  if (token) {\r\n    API.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n  } else {\r\n    delete API.defaults.headers.common['Authorization'];\r\n  }\r\n};\r\n\r\nexport default API;"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;QACP,gBAAgB;IAClB;AACF;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO;QACT,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IAClE,OAAO;QACL,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;IACrD;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useContext, useCallback } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Product, Category } from '@/types';\nimport API from '@/lib/api';\nimport { CartContext } from '@/context/CartContext';\n\nexport default function Home() {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [products, setProducts] = useState<Product[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const { addToCart } = useContext(CartContext);\n\n  const fetchProducts = useCallback(async (pageNum: number, categoryId: string) => {\n    setLoading(true);\n    try {\n      const res = await API.get('/products', {\n        params: { \n          page: pageNum,\n          // Hanya kirim parameter kategori jika bukan 'all'\n          ...(categoryId !== 'all' && { category: categoryId })\n        }\n      });\n      // **PERBAIKAN UTAMA DI SINI**\n      // Ambil array dari properti 'data' di dalam respons\n      setProducts(res.data.data || []); \n      setTotalPages(res.data.totalPages || 1);\n    } catch (error) {\n      console.error(\"Gagal mengambil produk:\", error);\n      setProducts([]); // Set ke array kosong jika ada error\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    async function fetchCategories() {\n      try {\n        const res = await API.get('/categories');\n        setCategories(res.data);\n      } catch (error) {\n        console.error(\"Gagal mengambil kategori:\", error);\n      }\n    }\n    fetchCategories();\n  }, []);\n\n  useEffect(() => {\n    fetchProducts(page, selectedCategory);\n  }, [page, selectedCategory, fetchProducts]);\n\n  const handleCategoryChange = (catId: string) => {\n    setPage(1);\n    setSelectedCategory(catId);\n  }\n\n  // Karena products sekarang dijamin array, kode di bawah ini akan berfungsi\n  const filteredProducts = products; // Logika filter sudah ditangani oleh backend\n\n  return (\n    <div className=\"w-full min-h-screen text-gray-800\">\n      <section className=\"relative w-full h-[50vh] bg-gray-400 bg-cover bg-center flex items-center justify-center text-center px-5\" style={{backgroundImage: \"url('/bg-1.jpg')\"}}>\n        <div className=\"relative z-10 text-white\">\n          <h2 className=\"text-4xl md:text-5xl font-bold mb-4 drop-shadow-lg\">Belanja Produk Fashion Berkualitas</h2>\n          <a href=\"#produk\" className=\"px-6 py-3 mt-10 bg-green-600 text-white rounded hover:bg-green-700 transition\">\n            Mulai Belanja\n          </a>\n        </div>\n        <div className=\"absolute inset-0 bg-black/40 z-0\"></div>\n      </section>\n\n      <section className=\"my-12 px-5 md:px-10\">\n        <h3 className=\"text-2xl font-semibold text-center mb-8\">Kategori Populer</h3>\n        <div className=\"flex justify-center gap-3 flex-wrap\">\n          <button onClick={() => handleCategoryChange('all')} className={`border-2 px-6 py-2 rounded-full transition ${selectedCategory === 'all' ? 'bg-green-500 text-white border-green-500' : 'border-gray-300 text-gray-700 hover:bg-gray-100'}`}>Semua</button>\n          {categories.map((cat) => (\n            <button key={cat._id} onClick={() => handleCategoryChange(cat._id)} className={`border-2 px-6 py-2 rounded-full transition ${selectedCategory === cat._id ? 'bg-green-500 text-white border-green-500' : 'border-gray-300 text-gray-700 hover:bg-gray-100'}`}>{cat.name}</button>\n          ))}\n        </div>\n      </section>\n\n      <section id=\"produk\" className=\"px-5 md:px-10 scroll-mt-20\">\n        <h3 className=\"text-2xl font-semibold text-center mb-8\">Produk Unggulan</h3>\n        {loading ? (\n           <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\">\n             {[...Array(8)].map((_, i) => (\n                <div key={i} className=\"animate-pulse space-y-4\">\n                  <div className=\"bg-gray-300 h-48 rounded-lg\"></div>\n                  <div className=\"bg-gray-300 h-5 w-3/4 rounded\"></div>\n                  <div className=\"bg-gray-300 h-4 w-1/2 rounded\"></div>\n                </div>\n             ))}\n           </div>\n        ) : filteredProducts.length === 0 ? (\n          <p className=\"text-center text-gray-500 py-10\">Tidak ada produk di kategori ini.</p>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8\">\n              {filteredProducts.map((product) => (\n                <div key={product._id} className=\"border rounded-xl flex flex-col group shadow-sm hover:shadow-lg transition-shadow\">\n                  <Link href={`/product/${product._id}`}>\n                    <div className=\"relative w-full h-56 bg-gray-100 overflow-hidden rounded-t-xl\">\n                      <Image src={`${process.env.NEXT_PUBLIC_API_URL?.replace('/api','')}${product.imageUrl}`} alt={product.name} layout=\"fill\" objectFit=\"contain\" className=\"p-4 group-hover:scale-105 transition-transform duration-300\"/>\n                    </div>\n                  </Link>\n                  <div className=\"p-4 flex flex-col flex-grow\">\n                    <h3 className=\"font-semibold mb-2 truncate\" title={product.name}>{product.name}</h3>\n                    <p className=\"text-green-600 font-bold text-lg mt-auto\">Rp {product.price.toLocaleString()}</p>\n                    <button onClick={() => addToCart(product)} className=\"mt-4 w-full bg-green-500 text-white py-2 rounded text-center hover:bg-green-600 transition\">Tambah Keranjang</button>\n                  </div>\n                </div>\n              ))}\n            </div>\n            {totalPages > 1 && (\n              <div className=\"flex justify-center items-center mt-12 space-x-2\">\n                <button onClick={() => setPage(p => p - 1)} disabled={page <= 1} className=\"px-4 py-2 border rounded disabled:opacity-50 disabled:cursor-not-allowed\">Sebelumnya</button>\n                <span className=\"px-4 py-2 font-medium\">Halaman {page} dari {totalPages}</span>\n                <button onClick={() => setPage(p => p + 1)} disabled={page >= totalPages} className=\"px-4 py-2 border rounded disabled:opacity-50 disabled:cursor-not-allowed\">Berikutnya</button>\n              </div>\n            )}\n          </>\n        )}\n      </section>\n      \n      <footer className=\"mt-24 bg-gray-800 text-white py-10 px-10\">\n        <div className=\"max-w-7xl mx-auto text-center\">\n            <p>Â© {new Date().getFullYear()} MDG Fashion. All rights reserved.</p>\n        </div>\n      </footer>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}