{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/app/dashboard/order/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\n\r\ntype CustomerDetails = {\r\n  name: string;\r\n  address: string;\r\n  phone: string;\r\n};\r\n\r\ntype Order = {\r\n  _id: string;\r\n  productName: string;\r\n  price: number;\r\n  customerDetails: CustomerDetails;\r\n  createdAt: string;\r\n  status: 'Diproses' | 'Dikirim' | 'Selesai' | 'Dibatalkan';\r\n};\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL;\r\n\r\nexport default function OrdersDashboardPage() {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await axios.get(`${API_URL}/orders`);\r\n        setOrders(response.data);\r\n      } catch (err) {\r\n        console.error(\"Gagal mengambil data pesanan:\", err);\r\n        setError(\"Tidak dapat memuat data pesanan. Pastikan backend berjalan.\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const handleStatusChange = async (orderId: string, newStatus: Order['status']) => {\r\n    setOrders(orders.map(order => \r\n      order._id === orderId ? { ...order, status: newStatus } : order\r\n    ));\r\n\r\n    try {\r\n      await axios.put(`${API_URL}/orders/${orderId}/status`, { status: newStatus });\r\n      toast.success('Status pesanan berhasil diperbarui!');\r\n    } catch (err) {\r\n      toast.error('Gagal memperbarui status. Silakan refresh halaman.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen\">\r\n      <main className=\"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8\">\r\n        <header className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard Pesanan</h1>\r\n          <p className=\"text-gray-600 mt-1\">Kelola semua pesanan yang masuk di sini.</p>\r\n        </header>\r\n\r\n        {isLoading ? (\r\n          <p className=\"text-center text-gray-500\">Memuat data...</p>\r\n        ) : error ? (\r\n          <p className=\"text-center text-red-500\">{error}</p>\r\n        ) : orders.length === 0 ? (\r\n          <div className=\"text-center py-20 bg-white border rounded-lg\">\r\n            <h3 className=\"text-xl font-medium text-gray-800\">Belum Ada Pesanan</h3>\r\n            <p className=\"text-gray-500 mt-2\">Saat ini belum ada pesanan yang masuk.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">Tanggal</th>\r\n                    <th className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Nama Produk</th>\r\n                    <th className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Pelanggan</th>\r\n                    <th className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Total Harga</th>\r\n                    <th className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                  {orders.map((order) => (\r\n                    <tr key={order._id}>\r\n                      <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm text-gray-500 sm:pl-6\">\r\n                        {new Date(order.createdAt).toLocaleDateString('id-ID', {\r\n                          day: '2-digit', month: 'short', year: 'numeric'\r\n                        })}\r\n                      </td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm font-medium text-gray-900\">{order.productName}</td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{order.customerDetails.name}</td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        Rp {order.price.toLocaleString('id-ID')}\r\n                      </td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        <select\r\n                          value={order.status}\r\n                          onChange={(e) => handleStatusChange(order._id, e.target.value as Order['status'])}\r\n                          className={`border-none rounded-md py-1 text-xs font-medium ${\r\n                            order.status === 'Selesai' ? 'bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20' :\r\n                            order.status === 'Dikirim' ? 'bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10' :\r\n                            order.status === 'Diproses' ? 'bg-yellow-50 text-yellow-800 ring-1 ring-inset ring-yellow-600/20' :\r\n                            'bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/10'\r\n                          }`}\r\n                        >\r\n                          <option value=\"Diproses\">Diproses</option>\r\n                          <option value=\"Dikirim\">Dikirim</option>\r\n                          <option value=\"Selesai\">Selesai</option>\r\n                          <option value=\"Dibatalkan\">Dibatalkan</option>\r\n                        </select>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}