{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/components/AuthForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useContext } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { AuthContext } from \"@/context/AuthContext\";\r\nimport toast from 'react-hot-toast';\r\n\r\n\r\nexport default function AuthForm({ type }: { type: \"login\" | \"register\" }) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const router = useRouter();\r\n  const { login } = useContext(AuthContext);\r\n\r\n  const isLogin = type === \"login\";\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const endpoint = `${process.env.NEXT_PUBLIC_API_URL}/auth/${type}`;\r\n    const payload = isLogin ? { email, password } : { name, email, password };\r\n\r\n    try {\r\n      const res = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        toast.success(isLogin ? 'Login berhasil!' : 'Registrasi berhasil!');\r\n        // Panggil fungsi login dari context untuk menyimpan data user\r\n        login(data.token, data.result);\r\n        router.push(\"/dashboard/products\");\r\n      } else {\r\n        toast.error(data.message || \"Terjadi kesalahan\");\r\n      }\r\n    } catch (err) {\r\n      toast.error(\"Gagal terhubung ke server. Pastikan API aktif.\");\r\n      console.error(\"Error saat autentikasi:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"bg-white p-8 rounded-xl shadow-md w-full max-w-md space-y-5\"\r\n    >\r\n      <h2 className=\"text-2xl font-bold text-center text-green-600\">\r\n        {isLogin ? \"Login\" : \"Daftar\"}\r\n      </h2>\r\n\r\n      {!isLogin && (\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nama Lengkap\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          className=\"w-full p-3 border border-gray-300 rounded\"\r\n          required\r\n        />\r\n      )}\r\n\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        className=\"w-full p-3 border border-gray-300 rounded\"\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        className=\"w-full p-3 border border-gray-300 rounded\"\r\n        required\r\n      />\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={loading}\r\n        className=\"w-full bg-green-600 text-white py-3 rounded hover:bg-green-700 transition disabled:bg-green-400\"\r\n      >\r\n        {loading ? \"Memproses...\" : isLogin ? \"Login\" : \"Daftar\"}\r\n      </button>\r\n      \r\n      {/* ... sisanya sama */}\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;AAsBwB;;AApBxB;AACA;AACA;AACA;;;AALA;;;;;AAQe,SAAS,SAAS,EAAE,IAAI,EAAkC;;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,0HAAA,CAAA,cAAW;IAExC,MAAM,UAAU,SAAS;IAEzB,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QAEX,MAAM,WAAW,iEAAmC,MAAM,EAAE,MAAM;QAClE,MAAM,UAAU,UAAU;YAAE;YAAO;QAAS,IAAI;YAAE;YAAM;YAAO;QAAS;QAExE,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,UAAU;gBAChC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,IAAI,EAAE,EAAE;gBACV,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC,UAAU,oBAAoB;gBAC5C,8DAA8D;gBAC9D,MAAM,KAAK,KAAK,EAAE,KAAK,MAAM;gBAC7B,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,KAAK,OAAO,IAAI;YAC9B;QACF,EAAE,OAAO,KAAK;YACZ,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC3C,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QACC,UAAU;QACV,WAAU;;0BAEV,6LAAC;gBAAG,WAAU;0BACX,UAAU,UAAU;;;;;;YAGtB,CAAC,yBACA,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,WAAU;gBACV,QAAQ;;;;;;0BAIZ,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAU;gBACV,QAAQ;;;;;;0BAGV,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gBAC3C,WAAU;gBACV,QAAQ;;;;;;0BAGV,6LAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,UAAU,iBAAiB,UAAU,UAAU;;;;;;;;;;;;AAMxD;GA3FwB;;QAKP,qIAAA,CAAA,YAAS;;;KALF","debugId":null}}]
}