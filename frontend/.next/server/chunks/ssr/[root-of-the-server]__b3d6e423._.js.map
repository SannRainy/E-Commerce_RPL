{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Murataa/Documents/Documents/Dev/Joki/e-commerce%20elektronik/frontend/components/Navbar.tsx"],"sourcesContent":["import Link from 'next/link'\r\nimport React from 'react'\r\n\r\nconst Navbar = () => {\r\n  return (\r\n    <div className='w-full relative top-0 bg-green-500 py-5 px-10 text-white'>\r\n      <div className='flex justify-between items-center'>\r\n        <h1 className='text-3xl font-bold'>Hayata Store</h1>\r\n        <div className='flex gap-10'>\r\n            <Link href=\"/login\">Login</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Navbar"],"names":[],"mappings":";;;;AAAA;;;AAGA,MAAM,SAAS;IACb,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAqB;;;;;;8BACnC,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;;;;;AAKhC;uCAEe","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Murataa/Documents/Documents/Dev/Joki/e-commerce%20elektronik/frontend/app/dashboard/order/page.tsx"],"sourcesContent":["// app/dashboard/orders/page.tsx\r\n\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Navbar from '@/components/Navbar';\r\nimport toast from 'react-hot-toast';\r\n\r\ntype CustomerDetails = {\r\n  name: string;\r\n  address: string;\r\n  phone: string;\r\n};\r\n\r\n// Ubah `orderTimestamp` menjadi `createdAt` agar cocok dengan field dari Mongoose\r\ntype Order = {\r\n  _id: string;\r\n  productName: string;\r\n  price: number;\r\n  customerDetails: CustomerDetails;\r\n  createdAt: string; // Field ini otomatis dibuat oleh Mongoose\r\n  status: 'Diproses' | 'Dikirim' | 'Selesai' | 'Dibatalkan';\r\n};\r\n\r\nexport default function OrdersDashboardPage() {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/orders');\r\n        // Backend sudah mengurutkan, jadi tidak perlu sorting di frontend lagi\r\n        setOrders(response.data);\r\n      } catch (err) {\r\n        console.error(\"Gagal mengambil data pesanan:\", err);\r\n        setError(\"Tidak dapat memuat data pesanan. Pastikan backend berjalan.\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  // Fungsi untuk menangani perubahan status\r\n  const handleStatusChange = async (orderId: string, newStatus: Order['status']) => {\r\n    // Optimistic UI update: langsung ubah state di frontend\r\n    setOrders(orders.map(order => \r\n      order._id === orderId ? { ...order, status: newStatus } : order\r\n    ));\r\n\r\n    try {\r\n      // Kirim request ke backend untuk memperbarui status\r\n      await axios.put(`http://localhost:5000/api/orders/${orderId}/status`, {\r\n        status: newStatus,\r\n      });\r\n      toast.success('Status pesanan berhasil diperbarui!');\r\n    } catch (err) {\r\n      toast.error('Gagal memperbarui status. Mengembalikan perubahan.');\r\n      console.error(err);\r\n      // Jika gagal, kembalikan state ke semula (opsional, perlu mengambil data lagi)\r\n      // Untuk simpelnya, kita biarkan UI tetap seperti itu atau refresh\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen\">\r\n      <Navbar />\r\n      <main className=\"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8\">\r\n        <header className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard Pesanan</h1>\r\n          <p className=\"text-gray-600 mt-1\">Kelola semua pesanan yang masuk di sini.</p>\r\n        </header>\r\n\r\n        {orders.length === 0 ? (\r\n          <div className=\"text-center py-20 bg-white border rounded-lg\">\r\n            <h3 className=\"text-xl font-medium text-gray-800\">Belum Ada Pesanan</h3>\r\n            <p className=\"text-gray-500 mt-2\">Saat ini belum ada pesanan yang masuk.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">Tanggal</th>\r\n                    <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Nama Produk</th>\r\n                    <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Pelanggan</th>\r\n                    <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Total Harga</th>\r\n                    <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                  {orders.map((order) => (\r\n                    <tr key={order._id}>\r\n                      <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm text-gray-500 sm:pl-6\">\r\n                        {new Date(order.createdAt).toLocaleDateString('id-ID', {\r\n                          day: '2-digit', month: 'short', year: 'numeric'\r\n                        })}\r\n                      </td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm font-medium text-gray-900\">{order.productName}</td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{order.customerDetails.name}</td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        Rp {order.price.toLocaleString('id-ID')}\r\n                      </td>\r\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        {/* === PERUBAHAN UTAMA DI SINI === */}\r\n                        <select\r\n                          value={order.status}\r\n                          onChange={(e) => handleStatusChange(order._id, e.target.value as Order['status'])}\r\n                          className={`border-none rounded-md py-1 text-xs font-medium ${\r\n                            order.status === 'Selesai' ? 'bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20' :\r\n                            order.status === 'Dikirim' ? 'bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10' :\r\n                            order.status === 'Diproses' ? 'bg-yellow-50 text-yellow-800 ring-1 ring-inset ring-yellow-600/20' :\r\n                            'bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/10'\r\n                          }`}\r\n                        >\r\n                          <option value=\"Diproses\">Diproses</option>\r\n                          <option value=\"Dikirim\">Dikirim</option>\r\n                          <option value=\"Selesai\">Selesai</option>\r\n                          <option value=\"Dibatalkan\">Dibatalkan</option>\r\n                        </select>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}