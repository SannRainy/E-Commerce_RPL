{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Murataa/Documents/Documents/Dev/Joki/e-commerce%20elektronik/frontend/app/dashboard/products/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\ntype Product = {\r\n  _id: string;\r\n  name: string;\r\n  description?: string;\r\n  price: number;\r\n  stock: number;\r\n  imageUrl?: string;\r\n  category?: {\r\n    _id: string;\r\n    name: string;\r\n  };\r\n};\r\n\r\ntype Category = {\r\n  _id: string;\r\n  name: string;\r\n};\r\n\r\nexport default function ProductDashboard() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    stock: '',\r\n    category: '',\r\n  });\r\n  const [imageFile, setImageFile] = useState<File | null>(null);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n\r\n  const fetchProducts = async () => {\r\n    const res = await axios.get<Product[]>('http://localhost:5000/api/products');\r\n    setProducts(res.data);\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    const res = await axios.get<Category[]>('http://localhost:5000/api/categories');\r\n    setCategories(res.data);\r\n  };\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImageFile(file);\r\n      setPreviewUrl(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('name', form.name);\r\n      formData.append('description', form.description);\r\n      formData.append('price', form.price);\r\n      formData.append('stock', form.stock);\r\n      formData.append('category', form.category);\r\n      if (imageFile) formData.append('image', imageFile);\r\n\r\n      await axios.post('http://localhost:5000/api/products', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      setForm({ name: '', description: '', price: '', stock: '', category: '' });\r\n      setImageFile(null);\r\n      setPreviewUrl(null);\r\n      fetchProducts();\r\n    } catch (err) {\r\n      console.error('Gagal menambahkan produk:', err);\r\n    }\r\n  };\r\n\r\n  const deleteProduct = async (productId: string) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/products/${productId}`);\r\n      fetchProducts();\r\n    } catch (err) {\r\n      console.error('Gagal menghapus produk:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto\">\r\n      <h1 className=\"text-3xl font-bold mb-6 text-center\">Manajemen Produk</h1>\r\n\r\n      {/* Form Tambah Produk */}\r\n      <form onSubmit={handleSubmit} className=\"bg-white shadow rounded-lg p-6 grid gap-4 grid-cols-1 md:grid-cols-2\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nama Produk\"\r\n          value={form.name}\r\n          onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n          required\r\n          className=\"border p-2 rounded w-full\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Harga\"\r\n          value={form.price}\r\n          onChange={(e) => setForm({ ...form, price: e.target.value })}\r\n          required\r\n          className=\"border p-2 rounded w-full\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Stok\"\r\n          value={form.stock}\r\n          onChange={(e) => setForm({ ...form, stock: e.target.value })}\r\n          required\r\n          className=\"border p-2 rounded w-full\"\r\n        />\r\n        <select\r\n          value={form.category}\r\n          onChange={(e) => setForm({ ...form, category: e.target.value })}\r\n          required\r\n          className=\"border p-2 rounded w-full\"\r\n        >\r\n          <option value=\"\">Pilih Kategori</option>\r\n          {categories.map((cat) => (\r\n            <option key={cat._id} value={cat._id}>\r\n              {cat.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <textarea\r\n          placeholder=\"Deskripsi\"\r\n          value={form.description}\r\n          onChange={(e) => setForm({ ...form, description: e.target.value })}\r\n          className=\"border p-2 rounded md:col-span-2\"\r\n        />\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block font-medium text-sm text-gray-700 mb-1\">Gambar Produk</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleImageChange}\r\n            className=\"block w-full border p-2 rounded\"\r\n          />\r\n          {previewUrl && (\r\n            <img\r\n              src={previewUrl}\r\n              alt=\"Preview\"\r\n              className=\"mt-3 h-32 object-contain border rounded-md\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 md:col-span-2\"\r\n        >\r\n          Tambah Produk\r\n        </button>\r\n      </form>\r\n\r\n      {/* Tabel Produk */}\r\n      <div className=\"mt-10\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Daftar Produk</h2>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border border-gray-200 rounded-lg overflow-hidden text-sm text-center\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"p-2 border\">Gambar</th>\r\n                <th className=\"p-2 border\">Nama</th>\r\n                <th className=\"p-2 border\">Harga</th>\r\n                <th className=\"p-2 border\">Stok</th>\r\n                <th className=\"p-2 border\">Kategori</th>\r\n                <th className=\"p-2 border\">Aksi</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((prod) => (\r\n                <tr key={prod._id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"p-2 border\">\r\n                    {prod.imageUrl ? (\r\n                      <img src={`http://localhost:5000${prod.imageUrl}`} alt={prod.name} className=\"h-12 mx-auto\" />\r\n                    ) : (\r\n                      '-'\r\n                    )}\r\n                  </td>\r\n                  <td className=\"p-2 border\">{prod.name}</td>\r\n                  <td className=\"p-2 border\">Rp {prod.price.toLocaleString()}</td>\r\n                  <td className=\"p-2 border\">{prod.stock}</td>\r\n                  <td className=\"p-2 border\">{prod.category?.name || '-'}</td>\r\n                  <td className=\"p-2 border\">\r\n                    <button\r\n                      onClick={() => deleteProduct(prod._id)}\r\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                    >\r\n                      Hapus\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {products.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={6} className=\"p-4 text-gray-500\">\r\n                    Belum ada produk\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}