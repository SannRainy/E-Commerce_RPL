{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/context/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ntype User = {\r\n  id: string;\r\n  role: 'customer' | 'admin';\r\n};\r\n\r\ntype AuthContextType = {\r\n  user: User | null;\r\n  token: string | null;\r\n  login: (token: string, user: User) => void;\r\n  logout: () => void;\r\n  isLoading: boolean;\r\n};\r\n\r\nexport const AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  token: null,\r\n  login: () => {},\r\n  logout: () => {},\r\n  isLoading: true,\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    // Cek token saat aplikasi dimuat\r\n    const storedToken = localStorage.getItem('token');\r\n    const storedUser = localStorage.getItem('user');\r\n\r\n    if (storedToken && storedUser) {\r\n      setToken(storedToken);\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  const login = (newToken: string, newUser: User) => {\r\n    setToken(newToken);\r\n    setUser(newUser);\r\n    localStorage.setItem('token', newToken);\r\n    localStorage.setItem('user', JSON.stringify(newUser));\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken(null);\r\n    setUser(null);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    router.push('/login');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, login, logout, isLoading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAkBO,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACxD,MAAM;IACN,OAAO;IACP,OAAO,KAAO;IACd,QAAQ,KAAO;IACf,WAAW;AACb;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,iCAAiC;QACjC,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,MAAM,aAAa,aAAa,OAAO,CAAC;QAExC,IAAI,eAAe,YAAY;YAC7B,SAAS;YACT,QAAQ,KAAK,KAAK,CAAC;QACrB;QACA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,UAAkB;QAC/B,SAAS;QACT,QAAQ;QACR,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;IAC9C;IAEA,MAAM,SAAS;QACb,SAAS;QACT,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAO;YAAQ;QAAU;kBAClE;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/context/CartContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useState, useEffect, ReactNode } from 'react';\r\n\r\nexport type Product = {\r\n  _id: string;\r\n  name: string;\r\n  price: number;\r\n  imageUrl?: string;\r\n  stock: number;\r\n  category?: {\r\n    _id: string;\r\n    name: string;\r\n  };\r\n  description?: string;\r\n};\r\n\r\nexport type CartItem = {\r\n  product: Product;\r\n  quantity: number;\r\n};\r\n\r\ntype CartContextType = {\r\n  cart: CartItem[];\r\n  addToCart: (product: Product, quantity?: number) => void;\r\n  removeFromCart: (productId: string) => void;\r\n  updateQuantity: (productId: string, quantity: number) => void;\r\n  clearCart: () => void;\r\n  totalPrice: number;\r\n};\r\n\r\nexport const CartContext = createContext<CartContextType>({\r\n  cart: [],\r\n  addToCart: () => {},\r\n  removeFromCart: () => {},\r\n  updateQuantity: () => {},\r\n  clearCart: () => {},\r\n  totalPrice: 0,\r\n});\r\n\r\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // Load cart from localStorage on initial render\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      setCart(JSON.parse(savedCart));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Save cart to localStorage whenever it changes\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    // Recalculate total price\r\n    const total = cart.reduce((sum, item) => sum + item.product.price * item.quantity, 0);\r\n    setTotalPrice(total);\r\n  }, [cart]);\r\n\r\n  const addToCart = (product: Product, quantity = 1) => {\r\n    setCart((prevCart) => {\r\n      const existingItem = prevCart.find(item => item.product._id === product._id);\r\n      if (existingItem) {\r\n        return prevCart.map(item =>\r\n          item.product._id === product._id\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item\r\n        );\r\n      }\r\n      return [...prevCart, { product, quantity }];\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (productId: string) => {\r\n    setCart(prevCart => prevCart.filter(item => item.product._id !== productId));\r\n  };\r\n\r\n  const updateQuantity = (productId: string, quantity: number) => {\r\n    if (quantity <= 0) {\r\n      removeFromCart(productId);\r\n    } else {\r\n      setCart(prevCart =>\r\n        prevCart.map(item =>\r\n          item.product._id === productId ? { ...item, quantity } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cart, addToCart, removeFromCart, updateQuantity, clearCart, totalPrice }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AA+BO,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACxD,MAAM,EAAE;IACR,WAAW,KAAO;IAClB,gBAAgB,KAAO;IACvB,gBAAgB,KAAO;IACvB,WAAW,KAAO;IAClB,YAAY;AACd;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,gDAAgD;QAChD,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,QAAQ,KAAK,KAAK,CAAC;QACrB;IACF,GAAG,EAAE;IAEL,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,gDAAgD;QAChD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,0BAA0B;QAC1B,MAAM,QAAQ,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,OAAO,CAAC,KAAK,GAAG,KAAK,QAAQ,EAAE;QACnF,cAAc;IAChB,GAAG;QAAC;KAAK;IAET,MAAM,YAAY,CAAC,SAAkB,WAAW,CAAC;QAC/C,QAAQ,CAAC;YACP,MAAM,eAAe,SAAS,IAAI,CAAC,CAAA,OAAQ,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG;YAC3E,IAAI,cAAc;gBAChB,OAAO,SAAS,GAAG,CAAC,CAAA,OAClB,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG,GAC5B;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAS,IAC9C;YAER;YACA,OAAO;mBAAI;gBAAU;oBAAE;oBAAS;gBAAS;aAAE;QAC7C;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,QAAQ,CAAA,WAAY,SAAS,MAAM,CAAC,CAAA,OAAQ,KAAK,OAAO,CAAC,GAAG,KAAK;IACnE;IAEA,MAAM,iBAAiB,CAAC,WAAmB;QACzC,IAAI,YAAY,GAAG;YACjB,eAAe;QACjB,OAAO;YACL,QAAQ,CAAA,WACN,SAAS,GAAG,CAAC,CAAA,OACX,KAAK,OAAO,CAAC,GAAG,KAAK,YAAY;wBAAE,GAAG,IAAI;wBAAE;oBAAS,IAAI;QAG/D;IACF;IAEA,MAAM,YAAY;QAChB,QAAQ,EAAE;IACZ;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;YAAgB;YAAgB;YAAW;QAAW;kBACnG;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/POER/Desktop/e-commerce%20elektronik/e-commerce%20RPL/frontend/components/Navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport React, { useContext } from 'react';\r\nimport { AuthContext } from '@/context/AuthContext';\r\nimport { CartContext } from '@/context/CartContext';\r\nimport { ShoppingCartIcon, UserCircleIcon } from '@heroicons/react/24/outline';\r\n\r\n\r\nconst Navbar = () => {\r\n  const { user, logout } = useContext(AuthContext);\r\n  const { cart } = useContext(CartContext);\r\n\r\n  const cartItemCount = cart.reduce((count, item) => count + item.quantity, 0);\r\n\r\n  return (\r\n    <div className='w-full sticky top-0 bg-green-500 py-5 px-10 text-white z-50 shadow-md'>\r\n      <div className='flex justify-between items-center max-w-7xl mx-auto'>\r\n        <Link href=\"/\" className='text-3xl font-bold'>MDG Fashion</Link>\r\n        <div className='flex gap-6 items-center'>\r\n          <Link href=\"/cart\" className=\"relative\">\r\n            <ShoppingCartIcon className=\"h-7 w-7\" />\r\n            {cartItemCount > 0 && (\r\n              <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\r\n                {cartItemCount}\r\n              </span>\r\n            )}\r\n          </Link>\r\n          {user ? (\r\n            <div className=\"flex items-center gap-4\">\r\n              <Link href=\"/dashboard/products\" className=\"flex items-center gap-2\">\r\n                <UserCircleIcon className=\"h-7 w-7\"/>\r\n                Dashboard\r\n              </Link>\r\n              <button onClick={logout} className=\"font-semibold hover:underline\">Logout</button>\r\n            </div>\r\n          ) : (\r\n            <Link href=\"/login\" className=\"font-semibold hover:underline\">Login</Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Navbar;"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AASA,MAAM,SAAS;IACb,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,uHAAA,CAAA,cAAW;IAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,uHAAA,CAAA,cAAW;IAEvC,MAAM,gBAAgB,KAAK,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAE1E,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;8BAAqB;;;;;;8BAC9C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;4BAAQ,WAAU;;8CAC3B,8OAAC,+NAAA,CAAA,mBAAgB;oCAAC,WAAU;;;;;;gCAC3B,gBAAgB,mBACf,8OAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;wBAIN,qBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAsB,WAAU;;sDACzC,8OAAC,2NAAA,CAAA,iBAAc;4CAAC,WAAU;;;;;;wCAAW;;;;;;;8CAGvC,8OAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAAgC;;;;;;;;;;;iDAGrE,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;;;;;;AAM1E;uCAEe","debugId":null}}]
}